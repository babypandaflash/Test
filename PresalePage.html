<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>BabyPanda Flash - PreSale</title>
  <script src="https://unpkg.com/@solana/web3.js@latest/lib/index.iife.min.js"></script>
  <style>
    body {
      background-color: #f5f7fa;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      padding: 30px;
      color: #333;
      margin: 0;
      text-align: center;
    }

    nav {
      background-color: #e0e7ff;
      padding: 12px 0;
    }

    .hamburger-menu {
      cursor: pointer;
      display: inline-block;
      padding: 10px;
    }

    .bar {
      width: 25px;
      height: 3px;
      background-color: #4f46e5;
      margin: 4px auto;
      border-radius: 2px;
    }

    .nav-links {
      display: none;
      flex-direction: column;
      align-items: center;
      margin-top: 10px;
    }

    .nav-links a {
      margin: 10px 0;
      text-decoration: none;
      color: #4f46e5;
      font-weight: bold;
      font-size: 16px;
    }

    .sale-container {
      margin-top: 40px;
      max-width: 700px;
      margin-left: auto;
      margin-right: auto;
      background-color: #fff;
      padding: 24px;
      border-radius: 10px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.05);
    }

    .phase-section {
      margin-bottom: 40px;
    }

    .progress-bar {
      width: 100%;
      background-color: #eee;
      border-radius: 5px;
      overflow: hidden;
      margin: 10px 0;
      height: 20px;
    }

    .progress-fill {
      height: 100%;
      background-color: #4f46e5;
      width: 0%;
      transition: width 0.3s ease;
    }

    button {
      padding: 10px 20px;
      background-color: #4f46e5;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      margin-top: 10px;
    }

    button:disabled {
      background-color: #999;
      cursor: not-allowed;
    }

    input[type="number"] {
      padding: 10px;
      width: 200px;
      margin: 10px auto;
      border: 1px solid #ccc;
      border-radius: 5px;
      display: block;
      font-size: 16px;
    }

    footer {
      margin-top: 60px;
      font-size: 14px;
      color: #888;
    }

    #walletPopup img {
      border-radius: 8px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
  </style>
</head>
<body>

  <nav>
    <div class="hamburger-menu" onclick="toggleMenu()">
      <div class="bar"></div>
      <div class="bar"></div>
      <div class="bar"></div>
    </div>
    <div class="nav-links" id="navLinks">
      <a href="index.html">üè† Home</a>
      <a href="PrivateSalePage.html">üîê Private Sale</a>
      <a href="PresalePage.html">üí∞ Presale</a>
      <a href="PublicSalePage.html">üíµ Public Sale</a>
      <a href="RoadmapPage.html">üìà Roadmap</a>
      <a href="TokenomicsPage.html">üìä Tokenomics</a>
    </div>
  </nav>

  <div class="sale-container">
    <h1>üí∞ PreSale</h1>
    <p>Total Supply: 1,000,000,000 $BPANDA</p>
    <p>PreSale Allocation (20%): 200,000,000 $BPANDA</p>

    <!-- Phase 1 -->
    <div class="phase-section">
      <h2>Phase 1 (50%)</h2>
      <p>Allocation: 10% - 100,000,000 $BPANDA</p>
      <p>Price: 0.0000075 SOL per token</p>
      <p>Hardcap: 750 SOL</p>
      <p>Min Buy: 0.2 SOL | Max Buy: 10 SOL</p>
      <input type="number" id="solInput1" placeholder="Enter amount (min 0.2 SOL)" min="0.2" max="10" step="0.01"/>
      <div class="progress-bar">
        <div class="progress-fill" id="progress1" style="width: 0%;"></div>
      </div>
      <p>Raised: <span id="raised1">0</span> / 750 SOL (<span id="percent1">0%</span>)</p>
      <button id="buyPhase1" onclick="openWalletPopup(1)">Buy Phase 1</button>
      <p style="color: red;" id="status1">Phase 1 not started yet</p>
    </div>

    <!-- Phase 2 -->
    <div class="phase-section">
      <h2>Phase 2 (50%)</h2>
      <p>Allocation: 10% - 100,000,000 $BPANDA</p>
      <p>Price: 0.00001 SOL per token</p>
      <p>Hardcap: 1,000 SOL</p>
      <p>Min Buy: 0.2 SOL | Max Buy: 10 SOL</p>
      <input type="number" id="solInput2" placeholder="Enter amount (min 0.2 SOL)" min="0.2" max="10" step="0.01"/>
      <div class="progress-bar">
        <div class="progress-fill" id="progress2" style="width: 0%;"></div>
      </div>
      <p>Raised: <span id="raised2">0</span> / 1,000 SOL (<span id="percent2">0%</span>)</p>
      <button id="buyPhase2" onclick="openWalletPopup(2)">Buy Phase 2</button>
      <p style="color: red;" id="status2">Phase 2 not started yet</p>
    </div>
  </div>

  <footer>
    ¬© 2025 BabyPanda Flash. All rights reserved.
  </footer>

  <!-- Wallet Popup -->
  <div id="walletPopup" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:#000000aa; z-index:9999; justify-content:center; align-items:center;">
    <div style="background:#fff; padding:20px; border-radius:12px; width:90%; max-width:380px; text-align:center;">
      <h3>Select Wallet</h3>
      <div style="display:flex; flex-wrap:wrap; justify-content:center; gap:16px;">
        <div onclick="handleWalletChoice('phantom')" style="cursor:pointer;">
          <img src="https://cryptologos.cc/logos/phantom-phantom-logo.png?v=029" alt="Phantom" width="48" height="48"/><br>
          <small>Phantom</small>
        </div>
        <div onclick="handleWalletChoice('solflare')" style="cursor:pointer;">
          <img src="https://cryptologos.cc/logos/solflare-solflare-logo.png?v=029" alt="Solflare" width="48" height="48"/><br>
          <small>Solflare</small>
        </div>
      </div>
      <button onclick="closeWalletPopup()" style="margin-top:20px; padding:8px 16px;">Cancel</button>
    </div>
  </div>

  <script>
    const recipientWallet = "6obuXwr2TNZdqRZx3ujo4bazek715ipMMah4rzt7SwoL"; // Ganti dengan wallet kamu
    let selectedPhase = 1;

    let raisedPhase1 = 0;
    let raisedPhase2 = 0;
    const hardcap1 = 750;
    const hardcap2 = 1000;

    function toggleMenu() {
      const menu = document.getElementById('navLinks');
      menu.style.display = (menu.style.display === 'flex') ? 'none' : 'flex';
    }

    function updateProgress() {
      const percent1 = (raisedPhase1 / hardcap1) * 100;
      const percent2 = (raisedPhase2 / hardcap2) * 100;

      document.getElementById('raised1').innerText = raisedPhase1.toFixed(2);
      document.getElementById('percent1').innerText = percent1.toFixed(2) + "%";
      document.getElementById('progress1').style.width = percent1 + "%";

      document.getElementById('raised2').innerText = raisedPhase2.toFixed(2);
      document.getElementById('percent2').innerText = percent2.toFixed(2) + "%";
      document.getElementById('progress2').style.width = percent2 + "%";
    }

    function openWalletPopup(phase) {
      selectedPhase = phase;
      document.getElementById('walletPopup').style.display = 'flex';
    }

    function closeWalletPopup() {
      document.getElementById('walletPopup').style.display = 'none';
    }

    function handleWalletChoice(wallet) {
      const inputId = selectedPhase === 1 ? "solInput1" : "solInput2";
      const solAmount = parseFloat(document.getElementById(inputId).value);

      if (isNaN(solAmount) || solAmount < 0.2 || solAmount > 10) {
        alert("Please enter an amount between 0.2 and 10 SOL.");
        return;
      }

      const label = encodeURIComponent("BabyPanda Presale");
      const message = encodeURIComponent(`Buy Phase ${selectedPhase}`);

      const solanaUrl = `solana:${recipientWallet}?amount=${solAmount}&label=${label}&message=${message}`;

      window.location.href = solanaUrl;
      closeWalletPopup();
    }

    updateProgress();
  </script>
</body>
</html>
